<!DOCTYPE html>
<html lang="es" class="h-full">
<head>
  <link rel="icon" href="/favicon.ico" type="image/x-icon">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>🃏Noche de Póker</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Fuente Pixel -->
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="css/styles.css" />
</head>

<body class="min-h-screen h-full overflow-y-auto bg-balatro text-white p-4">
  <main class="z-10 relative max-w-2xl w-full mx-auto bg-black bg-opacity-60 rounded-2xl shadow-2xl p-8 space-y-6 border border-yellow-400 mt-10 mb-10">
    <h1 class="text-3xl md:text-4xl lg:text-5xl text-yellow-300 text-center font-pixel uppercase">🎲 Noche de Póker</h1>

    <section class="space-y-2">
      <p class="text-pixel text-pink-200 text-center">📅 Viernes 19 de Julio - 8:00 PM</p>
      <p class="text-pixel text-blue-200 text-center">📍 Dirección secreta (Casa de Leo)</p>
      <p class="text-pixel text-green-300 text-center">💸 Buy-in: $10</p>
      <p class="text-pixel text-center text-white">🔥 Premios, snacks, traete tu mejor cara de póker. No se permite llorar si pierdes.</p>
    </section>

    <!-- Formulario de asistencia -->
    <form id="formulario" class="space-y-4">
      <div>
        <label for="nombre" class="block text-pixel text-sm mb-1">Nombre</label>
        <input type="text" id="nombre" name="nombre" required
          class="w-full p-3 rounded bg-gray-800 text-white border border-yellow-400 focus:outline-none focus:ring-2 focus:ring-yellow-300" />
      </div>
      <div>
        <label for="contacto" class="block text-pixel text-sm mb-1">Contacto</label>
        <input type="text" id="contacto" name="contacto" required
          class="w-full p-3 rounded bg-gray-800 text-white border border-yellow-400 focus:outline-none focus:ring-2 focus:ring-yellow-300" />
      </div>
      <button type="submit" class="w-full bg-yellow-400 hover:bg-yellow-300 text-black font-bold py-3 px-4 rounded-lg text-pixel shadow-button mt-4 relative">
        Confirmar asistencia
        <img src="img/fire.gif" alt="Fuego" class="absolute -top-10 left-1/2 -translate-x-1/2 w-8 pointer-events-none" />
      </button>
    </form>

    <!-- Formulario de parqueadero -->
    <form id="form-parqueo" class="space-y-4 mt-8">
      <h2 class="text-center text-pixel text-yellow-300 text-xl">🚗 Reserva de Parqueadero</h2>
      <div>
        <label for="placa" class="block text-pixel text-sm mb-1">Placa del vehículo</label>
        <input type="text" id="placa" name="placa" required
          class="w-full p-3 rounded bg-gray-800 text-white border border-yellow-400 focus:outline-none focus:ring-2 focus:ring-yellow-300" />
      </div>
      <div>
        <label for="vehiculo" class="block text-pixel text-sm mb-1">Tipo de vehículo</label>
        <select id="vehiculo" name="vehiculo" required
          class="w-full p-3 rounded bg-gray-800 text-white border border-yellow-400 focus:outline-none focus:ring-2 focus:ring-yellow-300">
          <option value="">Seleccione una opción</option>
          <option value="auto">Auto</option>
          <option value="moto">Moto</option>
          <option value="bicicleta">Bicicleta</option>
        </select>
      </div>
      <button type="submit"
        class="w-full bg-yellow-400 hover:bg-yellow-300 text-black font-bold py-3 px-4 rounded-lg text-pixel shadow-button mt-4">
        Confirmar parqueo
      </button>
    </form>

    <p id="mensaje" class="text-center text-green-300 text-pixel hidden mt-4">¡Gracias por confirmar! 🥳</p>
  </main>

  <!-- Firebase -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-app.js";
    import { getDatabase, ref, push } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-database.js";
  
    const firebaseConfig = {
      apiKey: "AIzaSyAUxAFr7MnsFIuV4IPsaqL1zm888axc74o",
      authDomain: "pokernight-b9512.firebaseapp.com",
      projectId: "pokernight-b9512",
      storageBucket: "pokernight-b9512.appspot.com",
      messagingSenderId: "662098273299",
      appId: "1:662098273299:web:55a1081645826d81d2cbe6",
      measurementId: "G-HF6LP2M0C1",
      databaseURL: "https://pokernight-b9512-default-rtdb.firebaseio.com"
    };
  
    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
  
    // Formulario asistencia
    const formAsistencia = document.getElementById("formulario");
  
    formAsistencia.addEventListener("submit", function (e) {
      e.preventDefault();
  
      const nombreInput = document.getElementById("nombre");
      const contactoInput = document.getElementById("contacto");
  
      const nombre = nombreInput.value.trim();
      const contacto = contactoInput.value.trim();
  
      if (!nombre || !contacto) {
        alert("Por favor completa todos los campos de asistencia");
        return;
      }
  
      push(ref(db, "asistentes/"), { nombre, contacto })
        .then(() => {
          document.getElementById("mensaje").classList.remove("hidden");
          nombreInput.value = "";
          contactoInput.value = "";
        })
        .catch((error) => {
          console.error("Error al guardar asistencia:", error);
          alert("Error al guardar asistencia");
        });
    });
  
    // Formulario parqueo
    const formParqueo = document.getElementById("form-parqueo");
  
    formParqueo.addEventListener("submit", function (e) {
      e.preventDefault();
  
      const placaInput = document.getElementById("placa");
      const vehiculoSelect = document.getElementById("vehiculo");
  
      const placa = placaInput.value.trim();
      const vehiculo = vehiculoSelect.value.trim();
  
      if (!placa || !vehiculo) {
        alert("Por favor completa todos los campos de parqueo");
        return;
      }
  
      push(ref(db, "parqueadero/"), { placa, vehiculo })
        .then(() => {
          alert("Reserva de parqueadero confirmada 🚗");
          placaInput.value = "";
          vehiculoSelect.value = "";
        })
        .catch((error) => {
          console.error("Error al guardar parqueo:", error);
          alert("Error al guardar parqueo");
        });
    });
  </script>
  

  <script src="js/main.js"></script>
</body>
</html>
